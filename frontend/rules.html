<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battlecards - Game Rules</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <button class="back-button" onclick="goHome()">‚Üê Home</button>
    
    <header class="header">
        <h1>Battlecards!</h1>
        <button class="menu-button" id="menu-btn">‚ò∞ Menu</button>
        
        <div class="dropdown-menu" id="dropdown-menu">
            <div class="dropdown-item user-info" id="user-info"></div>
            <div class="dropdown-divider"></div>
            <div class="dropdown-item" onclick="navigateTo('profile.html')">üë§ Profile</div>
            <div class="dropdown-item" onclick="navigateTo('game-history.html')">üìú Game History</div>
            <div class="dropdown-item" onclick="navigateTo('leaderboard.html')">üèÜ Leaderboard</div>
            <div class="dropdown-item" onclick="navigateTo('statistics.html')">üìä Game Statistics</div>
            <div class="dropdown-item" onclick="navigateTo('rules.html')">üìñ Game Rules</div>
            <div class="dropdown-divider"></div>
            <div class="dropdown-item" onclick="logout()">üö™ Logout</div>
        </div>
    </header>
    
    <div class="container">
        <div class="placeholder-container">
            <h2>üìñ Game Rules</h2>
            <div style="text-align: left; max-width: 600px; margin: 2rem auto; line-height: 1.8;">
                <h3>How to Play:</h3>
                <ol>
                    <li><strong>Starting a Game:</strong> 
                        <ul>
                            <li>Click the "PLAY" button on the home page</li>
                            <li>Enter the opponent's username to create a game invitation</li>
                            <li>Your opponent will receive the invitation and can accept it</li>
                            <li>Once accepted, both players proceed to deck selection</li>
                        </ul>
                    </li>
                    
                    <li><strong>Building Your Deck:</strong> 
                        <ul>
                            <li>You must select exactly <strong>22 cards</strong> from Rock, Paper, and Scissors to form your deck</li>
                            <li><strong>Random Deck:</strong> Click "Random Deck" to automatically generate a random selection of 22 cards</li>
                            <li><strong>Manual Selection:</strong> Use the +/- buttons to choose how many cards of each type you want (Rock, Paper, Scissors). You can choose any combination that totals exactly 22 cards</li>
                            <li>Power values (1-13) are automatically and randomly assigned to your cards from the card database</li>
                            <li>Once your deck is complete, confirm your selection to proceed</li>
                            <li>The game begins when <strong>both players</strong> have selected their decks</li>
                        </ul>
                    </li>
                    
                    <li><strong>Each Turn:</strong>
                        <ul>
                            <li><strong>Drawing Cards:</strong> Click the "Draw Cards" button to draw <strong>3 cards</strong> from your deck to your hand. You can only draw once per turn</li>
                            <li><strong>Viewing Card Details:</strong> Each card in your hand displays its type (Rock ü™®/Paper üìÑ/Scissors ‚úÇÔ∏è) and power value (1-10)</li>
                            <li><strong>Playing a Card:</strong> Select one card from your hand and click "Play Card". The <strong>2 unplayed cards are permanently discarded</strong> from the game</li>
                            <li>Both players can draw and play independently - you don't have to wait for your opponent</li>
                            <li>The round <strong>automatically resolves</strong> when both players have played their cards</li>
                        </ul>
                    </li>
                    
                    <li><strong>Winning Rounds:</strong>
                        <ul>
                            <li><strong>Rock beats Scissors</strong> ü™® > ‚úÇÔ∏è</li>
                            <li><strong>Scissors beats Paper</strong> ‚úÇÔ∏è > üìÑ</li>
                            <li><strong>Paper beats Rock</strong> üìÑ > ü™®</li>
                            <li><strong>Same Type:</strong> If both players play the same card type (e.g., both play Rock), the card with the <strong>higher power value</strong> wins the round</li>
                            <li><strong>Perfect Tie:</strong> If both cards have the same type AND the same power value, the round is a tie and <strong>no points are awarded to either player</strong></li>
                        </ul>
                    </li>
                    
                    <li><strong>Game Length - 7 Rounds:</strong>
                        <ul>
                            <li>A game lasts exactly <strong>7 rounds</strong> (21 cards played from each player's 22-card deck)</li>
                            <li>Win a round to earn 1 point (tied rounds award 0 points)</li>
                            <li>The player with the most points after 7 rounds wins the game</li>
                            <li>After 7 rounds, each player has 1 card remaining (their 22nd card)</li>
                        </ul>
                    </li>
                    
                    <li><strong>Tiebreaker - The 22nd Card:</strong>
                        <ul>
                            <li><strong>What happens in a tie:</strong> If both players have the same score after 7 rounds, you'll be prompted: "Do you want to take your chance and play your last card?"</li>
                            <li><strong>Both players must agree:</strong> 
                                <ul>
                                    <li>If <strong>both players say YES</strong>: You each play your 22nd card, and the winner of this final round wins the game</li>
                                    <li>If <strong>at least one player says NO</strong>: The game ends as an official tie with no winner</li>
                                </ul>
                            </li>
                            <li><strong>Tiebreaker tie:</strong> If both 22nd cards are identical (same type and power), the game ends as a tie</li>
                            <li><strong>Note:</strong> Unlike regular rounds, there's only ONE tiebreaker opportunity with the remaining card - no continuous rounds</li>
                        </ul>
                    </li>
                    
                    <li><strong>Victory:</strong> The first player to have more points than their opponent after 7 rounds (or after the optional tiebreaker) wins the game! üëë</li>
                </ol>
                
                <h3 style="margin-top: 2rem;">Strategy Tips:</h3>
                <ul>
                    <li>Watch which card types your opponent has already played to anticipate their remaining deck</li>
                    <li>Save high-power cards for crucial later rounds</li>
                    <li>Each round, 2 cards are discarded - choose your played card wisely!</li>
                    <li>Remember: winning 4 out of 7 rounds guarantees victory without needing a tiebreaker</li>
                    <li>Your 22nd card is your last resort - consider its power when deciding to accept a tiebreaker</li>
                </ul>
                
                <h3 style="margin-top: 2rem;">Quick Summary:</h3>
                <p style="background: #ecf0f1; padding: 15px; border-radius: 8px; margin-top: 1rem;">
                    <strong>22 cards</strong> ‚Üí <strong>7 rounds</strong> (3 cards drawn, 1 played, 2 discarded per round) ‚Üí <strong>1 card left</strong> for potential tiebreaker
                </p>
            </div>
        </div>
    </div>
    
    <script>
        // Check authentication before page loads
        let currentUser = null;
        (function() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (!token || !user) {
                window.location.href = 'login.html';
            }
            
            try {
                currentUser = JSON.parse(user);
            } catch (e) {
                console.error('Error parsing user data:', e);
            }
        })();
        
        document.addEventListener('DOMContentLoaded', () => {
            setupMenu();
        });
        
        function setupMenu() {
            const userInfoElement = document.getElementById('user-info');
            if (userInfoElement && currentUser) {
                userInfoElement.textContent = currentUser.username;
            }
            
            const menuBtn = document.getElementById('menu-btn');
            const dropdownMenu = document.getElementById('dropdown-menu');
            
            if (menuBtn && dropdownMenu) {
                menuBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    dropdownMenu.classList.toggle('active');
                });
                
                document.addEventListener('click', () => {
                    dropdownMenu.classList.remove('active');
                });
            }
        }
        
        function navigateTo(page) {
            window.location.href = page;
        }
        
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }
        
        function goHome() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
